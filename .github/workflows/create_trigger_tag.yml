name: '【auto】Trigger git tag'

on:
  push:
  workflow_run:
    workflows: ["【auto】Create git tag"]
    types: ["completed"]

jobs:
  release:
    # if: ${{ github.event.workflow_run.conclusion == 'success' }}

    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2
      
      - name: Get Latest Tag
        run: |
          git fetch --tags --prune  # リモートリポジトリの最新情報を取得
          git describe --tags
      
      - name: 最新のタグを取得
        id: get_latest_tag
        run: |
          latest_tag=$(git describe --abbrev=0 --tags 2>/dev/null || echo "")
          echo "最新のタグ: $latest_tag"
          echo "::set-output name=latest_tag::$latest_tag"
        
      - name: Build and push excite-emininal-api Amazon ECR
        run: |
          echo "実行！！"
          pwd
